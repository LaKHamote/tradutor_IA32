

s_input_function:
    enter 4,0 ; criar variavel para contar numero de bytes lidos
    %define num_bytes dword [EBP-4]

    push EBX
    push ECX
    push EDX

    
    mov EAX, 3
    mov EBX, 0
    mov ECX, [EBP+12]
    mov EDX, [EBP+8]
    int 80h

    mov num_bytes, 0
    mov EBX, [EBP+12] ; ponteiro pro inicio do buffer
loop:
    mov EAX, [EBP+8] ; limite de bytes lidos
    cmp num_bytes, EAX
    jz all_read
    mov EAX, [EBX] ; ler um char do buffer
    cmp EAX, 0Ah ; indice final do buffer
    jz all_read
    add num_bytes, 1
    add EBX, 1
    jmp loop
all_read:

    mov eax, 4
    mov ebx, 1
    mov ecx, str_lido
    mov edx, len_lido
    int 0x80
    push num_bytes
    call output_function
    mov EAX, 4
    mov EBX, 1
    mov ECX, str_bytes
    mov EDX, len_bytes
    int 80h

    pop EDX
    pop ECX
    pop EBX

    leave

    ret